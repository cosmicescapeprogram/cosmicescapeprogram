# STM32 Learning Notes   
### STM32F103              
Core：ARM Cortex-M3  
Frequency: 72MHZ 
RAM: 20K(SRAM)  
ROM: 64K(FLASH)  
Voltage: 2.0V~3.6V **(Standard 3.3V)**  
封装：LQFP48  
#### Periphearl(外设）
NVIC 嵌套向量中断控制器  
Systick 系统滴答定时器  
RCC 复位和时钟控制  
GPIO TIM 定时器  
EXIT 外部中断  
DMA 直接内存访问  
I2C I2C通信  
SPI SPI通信  
#### STM32F1系列系统架构
课本P69 DMA做一些简单且须重复的工作，例如：数据搬运  
#### 启动配置
BOOT1 BOOT1   (BOOT引脚的值只在上电之后的一刻有效，四个时钟之后失效）               
X     0        主闪存存储器     主闪存存储器被选为启动区域
0     1        系统存储器        系统存储器被选为启动区域（做串口下载使用，没有STLINK或LINK）    
1     1        内置SRAM         内置SRAM被选为启动区域

**如果要让引脚正常工作，应先设置好电源部分和最小系统部分的引脚** 
#### 最小系统电路
在单片机中只有一个芯片一般无法工作，需要连接最基本的电路，这个最基本的电路就叫做最小系统电路
如果需要接备用电池，可以接一个3V的纽扣电池，备用电池一般为RTC和备份寄存器服务

## GPIO(General Purpose Input Output)通用输入输出口  
**引脚电平 0~3.3V，部分引脚可容忍5V（带FT的引脚）**        
#### 输入输出模式功能
输入模式下可读取端口的高低电平或电压，用于**读取按键**输入、外接模块电平输入、ADC电压采集、模拟通信协议接收数据等  
输出模式下课控制端口输出高低电平，用以驱动LED、控制蜂鸣器、模拟通信协议输出时序等  
GPIO模块由寄存器和驱动器两部分组成，寄存器负责存储数据，STM32为32位单片机，所以寄存器为32位，但输入输出接口为16位，所以寄存器只有低16位存储内容，高16位不使用。驱动器增加信号的驱动能力  
#### 输入输出模式  
输入模式：上拉输入为默认为高电平的输入模式，下拉为默认为低点平的输入方式  
输出模式：推挽输出为NP皆工作，高电平和低电平都具有强驱动能力；开漏模式为N工作，高电平不具有驱动能力，低电平具有强驱动能力  **一般情况下使用推挽输出，特殊情况下使用开漏输出**
一般情况下，高电平弱驱动，低电平强驱动      
### 输出模式使用步骤      
##### 一、使用RCC开启GPIO的时钟    
RCC常用库函数：RCC_AHB外设时钟控制（使能或失能AHB外设时钟，第一个参数为选择哪个外设，第二个参数为使能或失能）
              RCC_APB1外设时钟控制
              RCC_APB2外设时钟控制        
#### 二、使用GPIO_Init函数初始化GPIO     
GPIO库函数：    
           GPIO_DeInit（GPIOx）指定的GPIO外设被复位  
           AFIODeInit（）复位AFIO外设  
           GPIO_Init（）用结构体的参数初始化GPIO口（先定义结构体变量，再给结构体赋值，这个函数内部会自动读取结构体的值，自动把外设的各个参数配置好）      
           GPIO_StructInit（）把结构体变量赋一个默认值
           8个GPIO读写函数
#### 三、使用输出或者输入的函数控制GPIO口     
8个GPIO读写函数：      
             GPIO_SetBits（GPIO_x，GPIO_Pin）把指定的端口设定为高电平把指定的端口设置为高电平 **可用或方式设定多个端口**
             GPIO_ReseBits（GPIO_x，GPIO_Pin）把指定的端口设置为低电平  
             GPIO_WriteBit（GPIO_x，GPIO_Pin，BitValue）根据第三个参数的值设置指定的端口  
             GPIO_Write（GPIO_x，PortValue）同时对16个端口进行写入操作  
             
                 









